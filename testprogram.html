<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>校园编程笔试题</title>
    <script type="text/javascript" src='js/jquery-1.11.3.js'>

    </script>
    <style media="screen">
      .table tr:nth-child(2n){
        background-color: #aff
      }
      .table tr:nth-child(2n+1){
        background-color: #a2f
      }
      .table tr:hover {
        background-color: #12f
      }
      .father {
        display: flex;
        width:100%;

      }
      .father div {
        width:30%;
        height: auto;//这个可以实现其他的两个的高度随着定高定宽的改变
        margin: 10px;
        background-color: red;
      }
    </style>
  </head>
  <body>
    <!--百度笔试题-->
    <table border='1' width='400px' class="table">
      <tr>
        <th>姓名</th>
        <th class="h1 up">力量</th>
        <th class="h2 up">敏捷</th>
        <th class="h3 up">智力</th>
        <th class="h4 up">得分</th>
      </tr>
      <tr>
        <td>徐宝婷</td>
        <td class="h1">4</td>
        <td class="h2">2</td>
        <td class="h3">1</td>
        <td class="h4">4</td>
      </tr>
      <tr>
        <td>徐宝婷</td>
        <td class="h1">7</td>
        <td class="h2">11</td>
        <td class="h3">3</td>
        <td class="h4">6</td>
      </tr>
      <tr>
        <td>徐宝婷</td>
        <td class="h1">3</td>
        <td class="h2">1</td>
        <td class="h3">2</td>
        <td class="h4">9</td>
      </tr>
    </table>
    <div class="father">
      <div style = 'width:200px;height:500px'></div>
      <div></div>
      <div></div>
    </div>
    <ul id="nav">
      <li><span class='span1'>这是内容1</span></li>
      <li><span class='span2'>这是内容2</span></li>
      <li><span class='span3'>这是内容3</span></li>
      <li><span class='span4'>这是内容4</span></li>
    </ul>
    <button type="button" name="button" class='btn'>点我翻转</button>
    <br>
    <br>
    <br>
    <form id="target">
      <select name="age">
          <option value="aaa">aaa</option>
          <option value="bbb" selected>bbb</option>
      </select>
      <select name="friends" multiple>
          <option value="qiu" selected>qiu</option>
          <option value="de">de</option>
          <option value="qing" selected>qing</option>
      </select>
      <input name="name" value="qiudeqing">
      <input type="password" name="password" value="11111">
      <input type="hidden" name="salery" value="3333">
      <textarea name="description">description1111</textarea>
      <input type="checkbox" name="hobby" checked value="football">Football
      <input type="checkbox" name="hobby" value="basketball">Basketball
      <input type="radio" name="sex" checked value="Female">Female
      <input type="radio" name="sex" value="Male">Male
    </form>
    <script type="text/javascript">
      $('table').css({'height':'200px','text-align':'center'});
      $('table').on('click','th',function(event) {
        var src = event.target||event.srcElement;
        if($(src).hasClass('h1') && $(src).hasClass('up')){
          var arr = $('.h1');
          foo(arr,src,'up')
        }else if($(src).hasClass('h1') && $(src).hasClass('down')){
          var arr = $('.h1');
          foo(arr,src,'down')
        }
        if($(src).hasClass('h2') && $(src).hasClass('up')){
          var arr = $('.h2');
          foo(arr,src,'up')
        }else if($(src).hasClass('h2') && $(src).hasClass('down')){
          var arr = $('.h2');
          foo(arr,src,'down')
        }
        if($(src).hasClass('h3') && $(src).hasClass('up')){
          var arr = $('.h3');
          foo(arr,src,'up')
        }else if($(src).hasClass('h3') && $(src).hasClass('down')){
          var arr = $('.h3');
          foo(arr,src,'down')
        }
        if($(src).hasClass('h4') && $(src).hasClass('up')){
          var arr = $('.h4');
          foo(arr,src,'up')
        }else if($(src).hasClass('h4') && $(src).hasClass('down')){
          var arr = $('.h4');
          foo(arr,src,'down')
        }
      })
      function foo (arr,src,defaults) {
        var a = [];
        arr.splice(0,1);
        for(var i = 0;i<arr.length;i++) {
          a.push(Number(arr[i].innerText))
        }
        if(defaults === 'up') {
          a.sort(function (a,b) {
            return a-b
          })
          for(var k = 0;k<arr.length;k++) {
            arr[k].innerText = a[k]
          }
          $(src).removeClass('up').addClass('down');
        }else {
          a.sort(function (a,b) {
            return -(a-b)
          })
          for(var k = 0;k<arr.length;k++) {
            arr[k].innerText = a[k]
          }
          $(src).removeClass('down').addClass('up');
        }
      }
      /*var ali = document.getElementsByTagName('tr');
      for(var i = 0;i<ali.length;i++) {
        if(i%2 == 0) {
          ali[i].style.backgroundColor = '#aff'
        }else {
          ali[i].style.backgroundColor = '#faf'
        }
      }*/
      /*该函数的功能用来输出页面宽度高度大于50像素的节点*/
      ;(function($,window,document) {
          function traverse(dod) {
            var obj = [];
            var body = dod||document.body;
            if (body.style) {//利用style只能找到设置过行内样式的元素
              var nwidth = window.parseInt(body.style.width,10)||0;
              var nheight = window.parseInt(body.style.height,10)||0;
              if(nwidth >50 &&  nheight>50) {
                obj.push(body)
              }
            }
            var nodes = body.childNodes;
            if(nodes.length>0) {
              for(var i = 0;i<nodes.length;i++) {
                obj = obj.concat(traverse(nodes[i]))
              }
            }
            return obj
          }
          console.log(traverse(document))
      }) ($,window,document)


      /*原生的事件绑定的兼容性书写*/
      ;(function() {
        var EventUtil = {
          getEvent: function (event) {
              return event || window.event;
          },
          getTarget: function (event) {
              return event.target || event.srcElement;
          },
          // 返回注册成功的监听器，IE中需要使用返回值来移除监听器
          on: function (elem, type, handler) {
              if (elem.addEventListener) {
                  elem.addEventListener(type, handler, false);
                  return handler;
              } else if (elem.attachEvent) {
                  function wrapper(event) {
                      return handler.call(elem, event);
                  };
                  elem.attachEvent('on' + type, wrapper);
                  return wrapper;
              }
          },
          off: function (elem, type, handler) {
              if (elem.removeEventListener) {
                  elem.removeEventListener(type, handler, false);
              } else if (elem.detachEvent) {
                  elem.detachEvent('on' + type, handler);
              }
          },
          preventDefault: function (event) {
              if (event.preventDefault) {
                  event.preventDefault();
              } else if ('returnValue' in event) {
                  event.returnValue = false;
              }
          },
          stopPropagation: function (event) {
              if (event.stopPropagation) {
                  event.stopPropagation();
              } else if ('cancelBubble' in event) {
                  event.cancelBubble = true;
              }
          }
      };
        var DOMUtil = {
          text: function (elem) {
            if ('textContent' in elem) {
                return elem.textContent;
            } else if ('innerText' in elem) {
                return elem.innerText;
            }
          },
          prop: function (elem, propName) {
              return elem.getAttribute(propName);
          }
        };
      var nav = document.getElementById('nav');
        EventUtil.on(nav, 'click', function (event) {
          var event = EventUtil.getEvent(event);
          var target = EventUtil.getTarget(event);
          console.log(target)
          var children = this.children;
          var i, len;
          var span;
          var obj = {};
          for (i = 0, len = children.length; i < len; ++i) {
            obj.index = i + 1;
            span = document.getElementsByTagName('span')[0];
            obj.name = DOMUtil.text(span);
            obj.class = DOMUtil.prop(span, 'class');
          }
          console.log('index: ' + obj.index + ' name: ' + obj.name +' class: ' + obj.class);
          });
        })()
        /*有一个大数组,var a = ['1', '2', '3', ...];a的长度是100,内容填充随机整数的字符串.
          请先构造此数组a,然后设计一个算法将其内容去重
        */
        ;(function() {
          //先随机生成一个长度为100的整数数数组
          function arr () {
            var a = [];
            for(var i = 0;i<100;i++) {
              a.push(Math.floor(Math.random()*10+1))
            }
            return a;
          }
          var b = function (arr) {
            var c = [];
            for(var i = 0;i<arr.length;i++) {
              if(c.indexOf(arr[i]) == -1) {
                c.push(arr[i]);
              }
            }
            return c
          }
          console.log(arr())
          console.log(b(arr()))

        })()
        /*编写一个函数将列表子元素顺序反转*/
        ;(function() {
          $('.btn').on ('click',function() {
            var li = $('#nav li');
            var frag = document.createDocumentFragment();
            for(var i = li.length;i>0; --i) {
              frag.appendChild(li[i-1]);
            }
            $('#nav')[0].appendChild(frag);
          })
        }) ()
        /*编写一个函数实现form的序列化(即将一个表单中的键值序列化为可提交的字符串)*/
        ;(function () {
          function serializeForm (form) {
            if (!form || form.nodeName.toUpperCase() !== 'FORM') {
              return;
            }
            var result = [];
            var i, len;
            var field, fieldName, fieldType;
            for(i = 0, len = form.length; i < len; ++i) {
              field = form.elements[i];
              fieldName = field.name;
              fieldType = field.type;
            //此处记得要做校验。禁用的属性和没有给name的值都要去除掉
            if (field.disabled || !fieldName) {
              continue;
            }
            switch (fieldType) {
              case 'text':
              case 'password':
              case 'hidden':
              case 'textarea':
                result.push(encodeURIComponent(fieldName) + '=' +
                    encodeURIComponent(field.value));
                break;
              case 'radio':
              case 'checkbox':
              //我们要对选中的项来进行传输，因此要用checked属性来过滤
                if (field.checked) {
                  result.push(encodeURIComponent(fieldName) + '=' +
                    encodeURIComponent(field.value));
                }
                break;
                case 'select-one':
              case 'select-multiple':
                for (var j = 0, jLen = field.options.length; j < jLen; ++j) {
                  //同样还是要对已经选中的进行过滤处理，这里有可能是一个key对应多个值
                  if (field.options[j].selected) {
                    result.push(encodeURIComponent(fieldName) + '=' +
                      encodeURIComponent(field.options[j].value || field.options[j].text));
                  }
                }
                break;
                case 'file':
                case 'submit':
                  break; // 是否处理？
                default:
                  break;
            }
          }
           return result.join('&');
        }
          var form = document.getElementById('target');
          console.log(serializeForm(form));
          console.log(new FormData(form));
        })()
        /*以下函数的作用是?空白区域应该填写什么*/
        // define
        ;(function () {
            function fn(str) {
                this.str = str;
            }
            fn.prototype.format = function () {
                //转换成数组,还是要注意正则表达式的匹配还是有问题
                var arg = Array.prototype.slice.call(arguments, 0);
                return this.str.replace(/\{\s*(\d+)\s*\}/g, function (a, b) {
                    return arg[b] || '';
                });

            };
            var t = new fn('<p><a href="{0}">{1}</a><span>{2}</span></p>');
            console.log(t.format('http://www.alibaba.com', 'Alibaba', 'Welcome'));
        })();

        /*解析一个完整的url,返回Object包含域与window.location相同*/
        ;(function () {
          function parseUrl(url) {
            var result = {};
            var keys = ['href', 'origin', 'protocol', 'host',
                        'hostname', 'port', 'pathname', 'search', 'hash'];
            var i, len;
            var regexp = /(([^:]+:)\/\/(([^:\/\?#]+)(:\d+)?))(\/[^?#]*)?(\?[^#]*)?(#.*)?/;
            var match = regexp.exec(url);
            if (match) {
                for (i = keys.length - 1; i >= 0; --i) {
                    result[keys[i]] = match[i] ? match[i] : '';
                }
            }
            return result;
          }
          console.log(parseUrl('https://github.com/qiu-deqing/FE-interview#dom%E5%85%83%E7%B4%A0e%E7%9A%84egetattributepropname%E5%92%8Cepropname%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB%E5%92%8C%E8%81%94%E7%B3%BB'))
        }) ()
        /*完成一个函数,接受数组作为参数,数组元素为整数或者数组,数组元素包含整数或数组,函数返回扁平化后的数组*/
        //遇到的问题是如何不改写传进去的某个值，因此我们可以将它置为要传经来的参数即可
        ;(function() {
          function git (arr,result) {
            for (var key in arr) {
              var op = arr[key]
              if(Object.prototype.toString.call(op).slice(8,-1) === 'Number') {
                result.push(op);
              }else {
                arguments.callee(op,result)
              }
            }
            return result;
          }
          console.log(git([1, [2, [ [3, 4], 5], 6]], new Array()))
        }) ();
        /*闭包练习*/
        ;(function () {
          for (var i = 0; i < 5; ++i) {
            (function(i) {
              setTimeout(function () {
                console.log(i + ' ');
              }, 1000);
            })(i)
          }
        }) ()
        /*请用代码写出(今天是星期x)其中x表示当天是星期几,如果当天是星期一,输出应该是"今天是星期一"*/
        ;(function () {
          var days = ['日','一','二','三','四','五','六'];
          console.log('今天是星期'+days[new Date().getDay()])
        })()
        ;(function() {
          var a1 = [1,2,3],a2 = [4];
          // Array.prototype.push.apply(a1,a2)
          // a1.push.apply([],a2)
          Array.prototype.concat.apply(a1,a2)
          console.log(Array.prototype.concat.apply(a1,a2))
          // console.log()
        })()
        /*DOM元素e的e.getAttribute(propName)和e.propName有什么区别和联系*/
        ;(function (window,document,undefined) {
          var div = document.getElementById('nav')
          var a = div.getAttribute('id');
          var b = div.id;
          console.log(div)
          console.log(a)
          console.log(b)
        })(window,document)
        /*网页中实现一个计算当年还剩多少时间的倒数计时程序,要求网页上实时动态显示"××年还剩××天××时××分××秒"*/
        /*我们可以由分析得到，这个功能可以利用定时器来完成*/
        /*;(function() {
          var a = setInterval(function() {
            var now= new Date();
            var future = new Date('2017/01/01 00:00').getTime();
            var year = now.getFullYear();
            var sum = Math.floor((now.getTime()-future)/1000);//秒
            var minutes = Math.floor(sum/60);//分
            var hours = Math.floor(sum/3600);//时
            var day = Math.floor(sum/86400);//天
            console.log(year+'年还剩'+day+'天'+hours+'时'+minutes+"分"+sum+'秒')
          },1000)
        }) ()*/
        /*再次练习数组扁平化*/
        ;(function () {
          function git (arr,result) {
            for(var key in arr) {
              var op = arr[key];
              if(Object.prototype.toString.call(op).slice(8,-1) === 'Number') {
                 result.push(op);
              }else {
                 arguments.callee(op,result)
              }
            }
            return result;
          }
          console.log(git([1, [2, [ [3, 4], 5], 6]],new Array()))
        })();
        /*编写一个函数接受url中query string为参数,返回解析后的Object,query string使application/x-www-form-urlencoded编码*/
        /*
        //  application/x-www-form-urlencoded编码会将' '转换为+
            key = decodeURIComponent(pair[0]).replace(/\+/g, ' ');
            value = decodeURIComponent(pair[1]).replace(/\+/g, ' ');
        */
        ;(function () {
          function git(str) {
            var result = {};
            //判断如果不是字符串就return，
            if(typeof str != 'string') {
              return
            }
            if(str.charAt(0) === '?') {
              str= str.slice(0,1);
            }
            str = str.replace(/[\s*]/g,'')
            str = str.split('&');
            for(var i = 0,a = 0;i<str.length;i++) {
              a=str[i].split('=');
              a[0] = decodeURIComponent(a[0]).replace(/\+/g, ' ');
              a[1] = decodeURIComponent(a[1]).replace(/\+/g, ' ');
              if(typeof result[a[0]] === 'undefined') {
                result[a[0]] = a[1]
              }else {
                var temp = result[a[0]];
                result[a[0]] = [temp];
                result[a[0]].push(a[1])
              }
            }
            return result;
          }
          console.log(git('sourceid = chrome-instant&ion = 1 & espv=2 & ie=UTF-8&ie=UTF-7'))
        })()
        /*解析一个完整的url,返回Object包含域与window.location相同有一个逆天的正则表达式*/
        /*快速排序*/
        ;(function () {
          function git (arr) {
            for(var j = 0; j<arr.length;j++) {
              for(var i = 0;i<arr.length-j-1;i++) {
                if(arr[i] >arr[i+1]) {
                  var temp = arr[i];
                  arr[i] = arr[i+1];
                  arr[i+1] = temp ;
                }
              }
            }
            return arr
          }
          console.log(git([9,8,7,6,5,4,34]))
        })()

    </script>
  </body>
</html>
